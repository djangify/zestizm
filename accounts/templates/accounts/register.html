{% extends "base.html" %}
{% block title %}Register{% endblock %}

{% block content %}
<div class="flex flex-col items-center justify-center min-h-screen px-6 py-16 text-[color:var(--color-font-main)] bg-[color:var(--color-brand-light)]">

  <div class="w-full max-w-md bg-white rounded-xl shadow-sm p-8 space-y-6">
    <h1 class="text-2xl font-semibold text-center text-[color:var(--color-brand-primary)]">Create an Account</h1>
    <p class="text-center text-sm text-[color:var(--color-brand-primary-contrast)]">Get access to free resources and download your products.</p>

    {% if messages %}
      {% for message in messages %}
        <div class="p-4 text-sm rounded-lg {% if message.tags == 'error' %}bg-red-50 text-red-800{% else %}bg-green-50 text-teal-700{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    {% if form.errors %}
      <div class="p-4 text-sm text-red-800 rounded-lg bg-red-50">
        {% for field in form %}
          {% for error in field.errors %}
            <p class="font-medium">{{ error }}</p>
          {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
          <p class="font-medium">{{ error }}</p>
        {% endfor %}
      </div>
    {% endif %}

    <form method="POST" class="space-y-4">
      {% csrf_token %}
      <div>
        <label for="first_name" class="block text-sm font-medium text-[color:var(--color-brand-primary)] mb-1">First Name</label>
        <input type="text" name="first_name" value="{{ form.first_name.value|default_if_none:'' }}" id="first_name" required class="w-full rounded-md border border-[color:var(--color-brand-secondary-contrast)] p-2 focus:ring-2 focus:ring-[color:var(--color-brand-primary)]">
      </div>

      <div>
        <label for="last_name"  class="block text-sm font-medium text-[color:var(--color-brand-primary)] mb-1">Last Name</label>
        <input type="text" name="last_name" id="last_name" required value="{{ form.last_name.value|default_if_none:'' }}" class="w-full rounded-md border border-[color:var(--color-brand-secondary-contrast)] p-2 focus:ring-2 focus:ring-[color:var(--color-brand-primary)]">
      </div>

      <div>
        <label for="username"  class="block text-sm font-medium text-[color:var(--color-brand-primary)] mb-1">Username</label>
        <input type="text" name="username" id="username" required value="{{ form.username.value|default_if_none:'' }}" class="w-full rounded-md border border-[color:var(--color-brand-secondary-contrast)] p-2 focus:ring-2 focus:ring-[color:var(--color-brand-primary)]">
      </div>

      <div>
        <label for="email" class="block text-sm font-medium text-[color:var(--color-brand-primary)] mb-1">Email Address</label>
        <input type="email" name="email" id="email" required value="{{ form.email.value|default_if_none:'' }}" class="w-full rounded-md border border-[color:var(--color-brand-secondary-contrast)] p-2 focus:ring-2 focus:ring-[color:var(--color-brand-primary)]">
      </div>

      <div>
        <label for="password1" class="block text-sm font-medium text-[color:var(--color-brand-primary)] mb-1">Password</label>
        <input type="password" name="password1" id="password1" required class="w-full rounded-md border border-[color:var(--color-brand-secondary-contrast)] p-2 focus:ring-2 focus:ring-[color:var(--color-brand-primary)]">
      </div>

      <div>
        <label for="password2" class="block text-sm font-medium text-[color:var(--color-brand-primary)] mb-1">Confirm Password</label>
        <input type="password" name="password2" id="password2" required class="w-full rounded-md border border-[color:var(--color-brand-secondary-contrast)] p-2 focus:ring-2 focus:ring-[color:var(--color-brand-primary)]">
      </div>

      <div class="flex items-start gap-2">
        <input type="checkbox" id="terms" required class="mt-1 accent-[color:var(--color-brand-primary)]">
        <label for="terms" class="text-sm text-[color:var(--color-font-main)]">I accept the
          <a href="{% url 'infopages:policy_detail' slug='terms-and-conditions' %}" class="text-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-accent)] font-medium">Terms and Conditions</a>
        </label>
      </div>

      <button type="submit" class="w-full bg-[color:var(--color-brand-primary-contrast)] text-white font-semibold py-2 rounded-md hover:bg-[color:var(--color-brand-dark)] transition">
        Sign Up
      </button>
    </form>

    <p class="text-center text-sm">Already have an account?
      <a href="{% url 'accounts:login' %}" class="text-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-accent)] font-medium">Log in</a>
    </p>
  </div>

</div>
{% endblock %}
