{% load static %}
<!-- ADDITIONAL PRODUCTS SECTION -->
{% if additional_products %}
<section id="additional-products" class="py-12" role="region" aria-labelledby="additional-products-title">
  <div class="max-w-7xl mx-auto px-6 md:px-12">
    
    {% if homepage_settings.additional_products_title %}
      <div class="text-center mb-8">
        <h2 id="additional-products-title" class="text-3xl sm:text-4xl font-semibold text-[color:var(--color-font-main)]">
          {{ homepage_settings.additional_products_title }}
        </h2>
      </div>
    {% endif %}
    
    <div class="grid gap-8 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      {% for product in additional_products %}
        <div class="border border-[color:var(--color-brand-accent)] rounded-lg p-4 hover:shadow-md transition-shadow duration-300 flex flex-col justify-between">
          <a href="{{ product.get_absolute_url }}">
            <figure class="mb-4 aspect-[3/4] flex items-center justify-center overflow-hidden rounded-md">
              {% if product.get_image_url %}
                <img src="{{ product.get_image_url }}" alt=Product - "{{ product.title }}" width="700" height="900" 
                loading="lazy" decoding="async" class="object-contain w-full h-full">
              {% else %}
                <img src="{% static 'images/placeholder.webp' %}" alt="Placeholder" class="object-contain w-full h-full">
              {% endif %}
            </figure>
            <h3 class="text-lg font-semibold text-[color:var(--color-brand-primary)] mb-2">{{ product.title }}</h3>
          </a>
          <div class="flex justify-between items-center mt-auto">
            <span class="text-lg font-semibold text-[color:var(--color-brand-accent)]">
              Â£{{ product.current_price }}
            </span>
            <a href="{{ product.get_absolute_url }}"
               class="text-sm uppercase border border-[color:var(--color-brand-secondary)] text-[color:var(--color-brand-secondary)] px-3 py-1.5 rounded hover:bg-[color:var(--color-brand-secondary)] hover:text-[color:var(--color-brand-light)] transition-colors">
              View
            </a>
          </div>
        </div>
      {% endfor %}
    </div>

  </div>
</section>
{% endif %}
