<section class="px-4 sm:px-6 lg:px-8 py-12 border-t border-[color:var(--color-brand-accent)]/20">
  <!-- Navigation -->
  <div class="flex flex-col sm:flex-row justify-between items-center gap-6 mb-12">
    {% if previous_post %}
    <a href="{{ previous_post.get_absolute_url }}" class="group flex items-center gap-2 text-[color:var(--color-font-main)] hover:text-[color:var(--color-brand-accent)] transition">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-[color:var(--color-brand-accent)]/70 group-hover:text-[color:var(--color-brand-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      <div>
        <p class="text-xs text-[color:var(--color-font-main)]/60">Previous</p>
        <p class="text-sm font-medium">{{ previous_post.title|truncatechars:40 }}</p>
      </div>
    </a>
    {% endif %}

    {% if next_post %}
    <a href="{{ next_post.get_absolute_url }}" class="group flex items-center gap-2 text-[color:var(--color-font-main)] hover:text-[color:var(--color-brand-accent)] transition">
      <div class="text-right">
        <p class="text-xs text-[color:var(--color-font-main)]/60">Next</p>
        <p class="text-sm font-medium">{{ next_post.title|truncatechars:40 }}</p>
      </div>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-[color:var(--color-brand-accent)]/70 group-hover:text-[color:var(--color-brand-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </a>
    {% endif %}
  </div>

  <!-- Category Link -->
  <div class="text-center mb-10">
    <a href="{{ post.category.get_absolute_url }}" class="inline-block px-5 py-2 border border-[color:var(--color-brand-accent)] rounded-full text-[color:var(--color-brand-accent)] hover:bg-[color:var(--color-brand-accent)] hover:text-white transition">
      View all posts in {{ post.category.name }}
    </a>
  </div>

  <!-- Related Posts -->
  {% if related_posts %}
  <div class="mt-12">
    <h2 class="text-2xl font-bold text-[color:var(--color-brand-dark)] mb-8">Related Posts</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
      {% for related in related_posts|slice:":2" %}
      <a href="{{ related.get_absolute_url }}" class="group block">
        <div class="h-48 overflow-hidden rounded-lg border border-[color:var(--color-brand-accent)]/30 bg-[color:var(--color-brand-light)] mb-4">
          {% if related.external_image_url %}
          <img src="{{ related.external_image_url }}" alt="image for {{ related.title }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
          {% elif related.image %}
          <img src="{{ related.image.url }}" alt="related image for {{ related.title }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
          {% else %}
          <div class="flex items-center justify-center h-full text-[color:var(--color-brand-accent)]">No Image</div>
          {% endif %}
        </div>
        <p class="text-[color:var(--color-font-main)] group-hover:text-[color:var(--color-brand-accent)] font-medium transition">{{ related.title|truncatechars:60 }}</p>
      </a>
      {% empty %}
      <p class="text-center text-[color:var(--color-font-main)]/60">No related posts found</p>
      {% endfor %}
    </div>
  </div>

  {% if related_posts|length > 2 %}
  <div class="mt-12">
    <h3 class="text-xl font-semibold text-[color:var(--color-brand-dark)] mb-4">More from this category</h3>
    <ul class="list-disc list-inside space-y-2 text-[color:var(--color-font-main)]">
      {% for related in related_posts|slice:"2:8" %}
      <li>
        <a href="{{ related.get_absolute_url }}" class="hover:text-[color:var(--color-brand-accent)] transition">{{ related.title }}</a>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}
  {% endif %}
</section>
